<h2>Ajouter Exploitation</h2>

<div class="exploitation-list">
  <div class="exploitation-card" *ngFor="let e of exploitations || []">

    <div class="exploitation-header">
      <h3>{{ e.nom }}</h3>
      <button class="delete-btn" (click)="delete(e.id!)">Delete</button>
    </div>

    <p>
      ğŸ“ {{ e.localisation }} <br>
      ğŸ‘¤ {{ e.responsable }} <br>
      ğŸŒ¾ {{ e.surfaceTotale }} ha
    </p>

    <ul class="parcelle-list">
      <li *ngFor="let p of e.parcelles">
        {{ p.culture }} â€“ {{ p.surface }} ha â€“ {{ p.etat }}
      </li>
    </ul>

  </div>
</div>


<form (ngSubmit)="save()">

  <input type="text" placeholder="Nom"
         [(ngModel)]="exploitation.nom" name="nom" required>

  <input type="text" placeholder="Localisation"
         [(ngModel)]="exploitation.localisation" name="localisation">

  <input type="text" placeholder="Responsable"
         [(ngModel)]="exploitation.responsable" name="responsable">

  <input type="number" placeholder="Surface Totale"
         [(ngModel)]="exploitation.surfaceTotale" name="surfaceTotale">

  <h3>Ajouter Parcelle</h3>

  <input type="text" placeholder="Culture"
         [(ngModel)]="parcelle.culture" name="culture">

  <input type="number" placeholder="Surface"
         [(ngModel)]="parcelle.surface" name="surface">

  <input type="text" placeholder="Etat"
         [(ngModel)]="parcelle.etat" name="etat">

  <button type="button" (click)="addParcelle()">+ Parcelle</button>

  <ul>
    <li *ngFor="let p of exploitation.parcelles; let i = index">
      {{ p.culture }} - {{ p.surface }} ha
      <button type="button" (click)="removeParcelle(i)">X</button>
    </li>
  </ul>

  <button type="submit">Save Exploitation</button>

</form>

<hr>


